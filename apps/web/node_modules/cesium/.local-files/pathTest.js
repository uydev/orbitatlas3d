import { readFileSync } from "fs";
import path from "path";
import { fileURLToPath, pathToFileURL } from "url";

const __dirname = path.dirname(fileURLToPath(import.meta.url));

// function test(path) {
//   const configPath1 = path.join(
//     import.meta.url,
//     "../../packages/sandcastle/sandcastle.config.js",
//   );
//   const configPath2 = path.join(
//     import.meta.url,
//     "../packages/sandcastle/sandcastle.config.js",
//   );
//   const configPath3 = path.join(
//     __dirname,
//     "../../packages/sandcastle/sandcastle.config.js",
//   );
//   const configPath4 = path.join(
//     __dirname,
//     "../packages/sandcastle/sandcastle.config.js",
//   );
//   console.log("configPath1", configPath1);
//   console.log("configPath2", configPath2);
//   console.log("configPath3", configPath3);
//   console.log("configPath4", configPath4);
//   const joined = path.join(__dirname, "../sandcastle.config.js");
//   const url = pathToFileURL(joined);
//   console.log("joined", joined);
//   console.log("url", url.href, url.pathname);
// }

// console.log("normal");
// test(path);
// console.log("posix");
// test(path.posix);
// console.log("win32");
// test(path.win32);

const list = JSON.parse(
  readFileSync(
    path.join(__dirname, "../Apps/Sandcastle2/gallery/list.json"),
    "utf-8",
  ),
);
const names = list.entries
  // .filter((e) => !e.labels.includes("Development"))
  .map(
    (e, i) =>
      // `${e.title}\thttps://dev-sandcastle.cesium.com?id=${e.id}\t=HYPERLINK(B${i + 1}, A${i + 1})\t${e.labels.join(",")}\t${e.lineCount}`,
      `${e.title}\thttps://dev-sandcastle.cesium.com?id=${e.id}\t${e.labels.join(",")}\t${e.lineCount}\t${e.labels.includes("Development") ? "Dev" : ""}`,
  );
console.log(names.join("\n"));
